# CMS管理ガイド - 画像、チェックリスト、モーダルの追加方法

## 1️⃣ チェックリストを追加する方法

### ステップ1：チェックリスト管理ページへ移動
1. 管理画面のサイドメニューから **「チェックリスト」** をクリック
2. 右上に **「+ 新規追加」** ボタンが表示されます

### ステップ2：モーダルウィンドウで入力
**「+ 新規追加」** ボタンをクリックすると、入力フォームが表示されます

**必須項目:**
- **タイトル** - チェックリストの名前（例：「基本ルール」「事故防止」）
- **項目** - チェック項目を1行ずつ入力

**任意項目:**
- **カテゴリ** - 分類用（例：「出庫前」「運転中」）

### ステップ3：項目を追加
1. 最初の項目を入力欄に書く
2. **「+ 項目を追加」** ボタンをクリックして、さらに項目を追加
3. 不要な項目は右側の **削除ボタン(×)** で削除

### ステップ4：保存
1. 下部の **「追加」** ボタンをクリック
2. 成功メッセージが表示されたら完了
3. 一覧に新しいチェックリストが表示されます

### 既存チェックリストの編集・削除
- **編集**: 一覧の 鉛筆ボタン をクリック → フォームが開きます
- **削除**: 一覧の ゴミ箱ボタン をクリック → 確認後削除

---

## 2️⃣ 画像を追加する方法

### ステップ1：画像管理ページへ移動
1. 管理画面のサイドメニューから **「画像」** をクリック
2. 画像ファイルの一覧が表示されます

### ステップ2：画像をアップロード
1. ページ上部の **「画像をアップロード」** セクションを探します
2. 3つのアップロード箇所があります：

**アップロード場所:**
- **ルート直下** - トップページなど全体に使う画像
- **img フォルダ** - 通常の画像ファイル（推奨）
- **uploads フォルダ** - ユーザーアップロード画像

### ステップ3：ファイルを選択
1. **「ファイルを選択」** ボタンをクリック
2. アップロードしたい画像ファイルを選択
3. **「アップロード」** ボタンをクリック

### ステップ4：確認
1. ページ下部の一覧に新しい画像が追加されます
2. 各画像の詳細情報：
   - **ファイル名**
   - **ファイルサイズ**
   - **使用箇所** - 実際に使われているか確認
   - **アクション** - 削除や詳細確認が可能

### 画像を削除する
1. 一覧から削除したい画像を探します
2. 行末の **「削除」** ボタンをクリック
3. **「本当に削除しますか？」** と確認されるので、確認して削除

---

## 3️⃣ モーダル（ポップアップウィンドウ）を追加する方法

### 【重要】2つの管理ページがあります

#### A. **通常のチェックリスト管理** で簡単に追加（推奨）
- チェックリスト項目を作成する際に、同時にモーダルを追加

#### B. **ビジュアルエディタ** で詳細編集
- HTMLを直接編集して複雑なモーダルを作成

---

### 方法A：チェックリスト管理からモーダルを追加（簡単）

#### ステップ1：チェックリスト管理を開く
- サイドメニューから **「チェックリスト」** をクリック
- **「+ 新規追加」** でフォームを開く

#### ステップ2：チェックリストを入力
1. タイトル、カテゴリ、項目を入力
2. 下にスクロールして、**「モーダルをこのチェックリストに関連付ける」** チェックボックスをONにする

#### ステップ3：モーダルの内容を入力
1. **「モーダルタイトル」** - ポップアップのタイトル
2. **「モーダル内容」** - ポップアップに表示するテキストや画像

#### ステップ4：保存
- **「追加」** をクリック
- ユーザーがメインサイトのチェックリストをクリックすると、このモーダルが表示されます

---

### 方法B：ビジュアルエディタで詳細編集（上級）

#### ステップ1：ビジュアルエディタを開く
- サイドメニューから **「ビジュアルエディタ」** をクリック

#### ステップ2：新規モーダルを追加
1. **「+ モーダルを追加」** ボタンをクリック
2. モーダルIDと名前を入力

#### ステップ3：内容を編集
1. **「タイトルを編集」** - ポップアップのタイトルを入力
2. **「本文を編集」** - 詳細なHTMLコンテンツを入力可能
3. ボタンテキストのカスタマイズも可能

#### ステップ4：プレビュー
- 右側のプレビューパネルでリアルタイム確認
- 問題なければ **「保存」** をクリック

---

## 🔄 すべてのコンテンツの同期

- **自動バックアップ** - 毎回の保存時に自動作成
- **リアルタイム反映** - 保存後すぐにメインサイトに反映
- **復元機能** - 問題が起きた場合、ダッシュボードから復元可能

---

## 📋 よくある質問

**Q1: 画像をアップロードしたのに表示されません**
- A: 対応フォーマットは `.jpg`, `.jpeg`, `.png`, `.gif` です
- サイズが大きすぎないか確認してください（推奨: 5MB以下）

**Q2: チェックリストを修正する方法は？**
- A: 一覧の 鉛筆ボタン をクリック → フォームが開く → 修正 → 「更新」をクリック

**Q3: モーダルの中に画像を入れたい**
- A: ビジュアルエディタで `<img>` タグを使用できます
- 例: `<img src="img/sample.jpg" alt="説明" style="width: 100%;">`

**Q4: 誤って削除してしまいました**
- A: ダッシュボードの **「バックアップから復元」** で以前の状態に戻せます

---

## 📍 各管理ページへのショートカット

| 機能 | URL | 説明 |
|------|-----|------|
| チェックリスト | `/task/admin/live_editor.php` | ライブエディタで直接編集 |
| 画像 | `/task/admin/images.php` | 画像の追加・削除・使用状況確認 |
| ライブエディタ | `/task/admin/live_editor.php` | リアルタイムプレビュー付き編集 |
| ダッシュボード | `/task/admin/index.php` | バックアップ・復元、統計表示 |

---

## 💡 ヒント

✅ 定期的に **「ダッシュボード」** をチェックして、現在のコンテンツ数を確認しましょう

✅ 大きな変更の前に **「バックアップから復元」** で事前バックアップを作成

✅ モーダルの複雑な編集が必要な場合は、ビジュアルエディタより **ライブエディタ** を使うと、プレビューを見ながら編集できます

