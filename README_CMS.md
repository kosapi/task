# Task CMS

タクシー業務チェックリストシステムのPHP版CMS

## 機能

- **スローガン管理**: 日替わりスローガンの編集
- **チェックリスト管理**: チェック項目の追加・編集・削除
- **画像管理**: 画像のアップロード・削除・一覧表示
- **バックアップ機能**: データの自動バックアップ

## セットアップ

### 必要要件
- PHP 7.4以上
- Webサーバー (Apache推奨)
- 書き込み権限: `data/`, `uploads/` ディレクトリ

### インストール手順

1. ファイルをWebサーバーのドキュメントルートに配置

2. ディレクトリの権限を設定:
```bash
chmod 755 data/ uploads/
```

3. 初期ログイン情報:
   - URL: `http://yoursite.com/admin/login.php`
   - ユーザー名: `admin`
   - パスワード: `admin123`

4. **重要**: 初回ログイン後、`config.php` のパスワードを変更してください:
```php
define('ADMIN_PASSWORD', password_hash('新しいパスワード', PASSWORD_BCRYPT));
```

## ディレクトリ構造

```
/
├── admin/              # 管理画面
│   ├── index.php       # ダッシュボード
│   ├── login.php       # ログイン
│   ├── slogans.php     # スローガン管理
│   ├── live_editor.php # HTML編集（統合エディタ）
│   ├── images.php      # 画像管理
│   └── settings.php    # 設定
├── api/                # API（将来拡張用）
├── data/               # データ保存
│   ├── content.json    # コンテンツデータ
│   └── backups/        # バックアップ
├── includes/           # 共通ファイル
│   └── functions.php   # 関数ライブラリ
├── uploads/            # アップロード画像
├── config.php          # 設定ファイル
└── .htaccess          # セキュリティ設定
```

## セキュリティ

- セッションベース認証
- CSRFトークン保護
- パスワードのBcryptハッシュ化
- JSONファイルへの直接アクセス禁止
- ファイルアップロードのバリデーション

## 使い方

### スローガンの編集
1. 管理画面にログイン
2. 「スローガン管理」をクリック
3. スローガンを編集・追加・削除
4. 「保存」をクリック

### チェックリストの管理
1. 「チェックリスト管理」をクリック
2. 「新規追加」ボタンで項目を追加
3. タイトル、カテゴリ、チェック項目を入力
4. 編集・削除も可能

### 画像のアップロード
1. 「画像管理」をクリック
2. 「画像をアップロード」ボタンをクリック
3. ファイルを選択してアップロード
4. URLをコピーして使用可能

## バックアップ

- 自動バックアップ: データ保存時に自動作成
- 手動バックアップ: 設定画面から作成可能
- バックアップファイル: `data/backups/` に保存

## トラブルシューティング

### ログインできない
- `config.php` のパスワードハッシュを確認
- セッションが有効か確認

### 画像がアップロードできない
- `uploads/` ディレクトリの書き込み権限を確認
- PHPの `upload_max_filesize` 設定を確認

### データが保存されない
- `data/` ディレクトリの書き込み権限を確認
- PHPのエラーログを確認

## ライセンス

Private use only
